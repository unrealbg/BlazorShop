@page "/search-result/{filter}"

@if (_searchedProducts.Any())
{
    <section class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-10">
        <header class="mb-6 text-center">
            <h1 class="text-2xl sm:text-3xl font-extrabold tracking-tight">Search Results</h1>
            <p class="mt-1 text-sm text-neutral-600">Found @_searchedProducts.Count() item(s) for "@Filter"</p>
        </header>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            @foreach (var product in _searchedProducts)
            {
                <article class="rounded-xl border border-neutral-200 bg-white/80 shadow transition hover:shadow-md">
                    <div class="relative aspect-[4/3] overflow-hidden rounded-t-xl bg-neutral-50">
                        <img src="@product.Image" alt="@product.Name" class="h-full w-full object-cover" />
                        @if (product.IsNew)
                        {
                            <span class="absolute top-2 left-2 inline-flex items-center rounded-full bg-emerald-600 px-2 py-0.5 text-xs font-semibold text-white shadow">
                                New
                            </span>
                        }
                    </div>

                    <div class="p-4">
                        <div class="flex items-start justify-between gap-4">
                            <div>
                                <h3 class="text-base font-semibold text-neutral-900">@product.Name</h3>
                                <div class="mt-1 text-sm text-neutral-600">Price: <span class="font-semibold text-neutral-900">€ @product.Price</span></div>
                            </div>
                        </div>

                        <div class="mt-4 flex items-center justify-between">
                            <button class="inline-flex items-center gap-2 rounded-md bg-neutral-900 text-white px-3 py-1.5 text-sm font-medium hover:bg-neutral-800"
                                    @onclick="() => AddItemToCart(product.Id)">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M6 6h15l-1.5 9h-12z" /><path d="M6 6 5 3H3" /></svg>
                                Add To Cart
                            </button>
                            <button class="inline-flex items-center rounded-md px-3 py-1.5 text-sm text-neutral-700 hover:text-neutral-900 hover:bg-neutral-100" @onclick="() => ShowDetails(product)">See More</button>
                        </div>
                    </div>
                </article>
            }
        </div>
    </section>
}
else
{
    <section class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-14">
        <div class="rounded-md bg-blue-50 text-blue-800 px-6 py-5 text-center shadow">
            No products found for "@Filter".
        </div>
        <div class="mt-6 text-center">
            <a href="/" class="inline-flex items-center rounded bg-amber-500 text-white px-4 py-2 font-semibold hover:bg-amber-600">Go Back to Home</a>
        </div>
    </section>
}

<ProductDetails Product="SelectedProduct"
                IsVisible="_showModal"
                OnClose="CloseDetails"
                OnAddToCart="AddItemToCart"
                OnAddToCartVariant="AddVariantToCart" />

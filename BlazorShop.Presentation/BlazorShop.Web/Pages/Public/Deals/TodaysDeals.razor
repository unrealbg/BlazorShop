@page "/todays-deals"
@using BlazorShop.Web.Shared.Toast

@implements IAsyncDisposable

<section class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-10 pb-12">
  <h2 class="text-3xl font-extrabold tracking-tight text-center">Today's Deals</h2>
  @if (_todaysDeals.Any())
  {
      <div class="mt-8 grid gap-8 sm:grid-cols-2 lg:grid-cols-4">
          @foreach (var product in _todaysDeals)
          {
              <article class="rounded-2xl bg-white shadow-[0_12px_30px_rgba(0,0,0,.08)] border border-black/5 overflow-hidden">
                  <div class="p-4">
                      <img src="@product.Image" alt="@product.Name" class="w-full aspect-[4/3] object-contain rounded" />
                      <h3 class="mt-4 text-base font-semibold">@product.Name</h3>
                      <p class="mt-1 text-sm"><span class="text-rose-500 font-semibold">Price</span> € @product.Price</p>
                  </div>
                  <div class="flex items-center justify-between px-4 pb-4 text-sm text-neutral-700">
                      <button class="inline-flex items-center gap-2" @onclick="() => AddItemToCart(product.Id)">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M6 6h15l-1.5 9h-12z"/><path d="M6 6 5 3H3"/></svg>
                          Add to Cart
                      </button>
                      <button class="inline-flex items-center gap-2" @onclick="() => ShowDetails(product)">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12Z"/></svg>
                          See More
                      </button>
                  </div>
              </article>
          }
      </div>
  }
  else
  {
      <div class="mt-10 flex justify-center">
          <div class="rounded-md bg-blue-50 text-blue-800 px-6 py-5 text-center shadow">
              No deals available for today. Check back later!
          </div>
      </div>
  }
</section>

<ProductDetails Product="SelectedProduct"
                IsVisible="_showModal"
                OnClose="CloseDetails"
                OnAddToCart="AddItemToCart" />


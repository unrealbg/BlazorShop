@page "/new-releases"
@implements IAsyncDisposable

<section class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-10 pb-12">
    @if (_newReleases.Any())
    {
        <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
            @foreach (var product in _newReleases)
            {
                <article class="rounded-2xl bg-white shadow-[0_12px_30px_rgba(0,0,0,.08)] border border-black/5 overflow-hidden">
                    <div class="p-6">
                        <h4 class="text-lg font-extrabold">@product.Name</h4>
                        @if (product.IsNew)
                        {
                            <span class="inline-block text-xs font-semibold text-white bg-green-600 px-2 py-0.5 rounded ml-2 align-middle">NEW</span>
                        }
                        <p class="mt-1 text-[15px]"><span class="text-rose-500 font-semibold">Price</span> € @product.Price</p>
                        <div class="mt-4 aspect-[4/3] rounded bg-white">
                            <img src="@product.Image" class="w-full h-full object-contain" />
                        </div>
                    </div>
                    <div class="flex items-center justify-between px-6 pb-5 text-sm text-neutral-700">
                        <button class="inline-flex items-center gap-2" @onclick="() => AddItemToCart(product.Id)">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M6 6h15l-1.5 9h-12z"/><path d="M6 6 5 3H3"/></svg>
                            Add To Cart
                        </button>
                        <button class="inline-flex items-center gap-2" @onclick="() => ShowDetails(product)">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12Z"/></svg>
                            See More
                        </button>
                    </div>
                </article>
            }
        </div>
    }
    else
    {
        <div class="mt-10 flex justify-center">
            <div class="rounded-md bg-blue-50 text-blue-800 px-6 py-5 text-center shadow">
                No new releases found
            </div>
        </div>
        <div class="mt-6 text-center">
            <a href="/" class="inline-flex items-center rounded bg-amber-500 text-white px-4 py-2 font-semibold hover:bg-amber-600">Go Back to Home</a>
        </div>
    }
</section>

<ProductDetails Product="SelectedProduct"
                IsVisible="_showModal"
                OnClose="CloseDetails"
                OnAddToCart="AddItemToCart" />